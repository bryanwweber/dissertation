% arara: lualatex
\input{../../figure-preamble.tex}
\pgfplotscreateplotcyclelist{tic}{
    blue,red,black%
}
\usetikzlibrary{matrix}
\begin{document}
\begin{tikzpicture}
\begin{axis}[
    ylabel={Intensity, A.U.},
    xlabel={Time, \si{\minute}},
    table/col sep = comma,
    table/x index={0},
    table/y index={1},
    every axis plot/.append style={
        solid,
        no markers,
    },
    % scaled y ticks=false,
    % yticklabel style={%
        % /pgf/number format/.cd,
        % sci,
        % sci generic={mantissa sep=\times,exponent={10^{####1}}},
    % },
    xmin=8, xmax=30,
    minor x tick num=4,
    minor y tick num=4,
    ymin=-2E4, ymax=2E5,
    every axis legend/.append style={
        % font = \scriptsize,
        at = {(axis cs:12,1.9E5)},
        anchor = north west,
    },
    cycle list name=tic,
    after end axis/.code={
        \matrix[
            matrix anchor=north west,
            ampersand replacement=\cell,
            matrix of nodes,
            row sep=1pt,
            column sep=5pt,
            every node/.style={
                inner sep=0pt,
                outer sep=0pt,
                font=\tiny,
            },
            column 1/.style={
                anchor=east,
            },
            column 2/.style={
                anchor=west,
            },
        ] 
        at (A)
        {
           1   \cell Argon + Carbon Dioxide\\
           2   \cell Formaldehyde 83\\
           3   \cell Water 97\\
           4   \cell Acetaldehyde 93\\
           5   \cell 1-Butene 87; iso-Butene 87\\
           6   \cell cyclobutene 88\\
           7   \cell 3-hydroxybutanal 80\\
           8   \cell 2-propenal 94\\
           9   \cell methyl vinyl ether 83\\
           10  \cell propylene oxide 81\\
           11  \cell 1,3-pentadiene 91\\
           12  \cell 2-methyl,2-propenal 90\\
           13  \cell methyl vinyl ketone 90\\
           14  \cell methylcyclohexane 97\\
        };
    },
]
\addplot table {04-Jun-14-1219-TIC.csv};
\addplot table {04-Jun-14-1454-TIC.csv};
\addplot table {04-Jun-14-2007-TIC.csv};
\legend{{26 \si{\milli\second}}, {12 \si{\milli\second}}, {0 \si{\milli\second}}};
\begin{scope}[
    every node/.style={
        font=\scriptsize,
    },
]
\pgfplotsset{every axis/.append style={clip=false}}
\node at (axis cs:8.5 ,1.25E5) {1};
\node at (axis cs:9.1 ,3.25E4) {2};
\node at (axis cs:9.5 ,1E5) {3};
\node at (axis cs:9.8 ,56000) {4};
\node at (axis cs:10.15 ,45000) {5,6};
\node at (axis cs:10.6 ,40000) {7};
\node at (axis cs:11.8 ,55000) {8};
\node at (axis cs:12,42000) {9};
\node at (axis cs:12.3,39000) {10};
\node at (axis cs:13.25,42000) {11};
\node at (axis cs:16,41000) {12};
\node at (axis cs:17,42000) {13};
\node at (axis cs:28,50000) {14};
\coordinate (A) at (axis cs:20, 1.9E5);
\end{scope}
\end{axis}
\end{tikzpicture}
\end{document}
